AI训战营学习平台 - 产品需求文档 (PRD)


1. 项目概述

1.1 项目目标
开发一个稳定、易用的在线AI训战营学习平台。该平台旨在替代原有的直播授课模式，为学员提供录播课程观看、资料下载和作业提交的一站式学习体验，同时为管理员提供便捷的内容和学员管理功能。

1.2 项目背景
公司现有的AI学习课程采用直播形式，互动性强但缺乏沉淀和灵活性。为了提高课程的可复用性、方便学员随时回顾学习，并系统化地管理学员和教学内容，现决定开发一个专用的培训平台。

1.3 核心原则
	•	稳定性优先: 首个版本功能求精不求多，保障核心流程稳定可靠，避免出现影响用户体验的严重BUG。
	•	技术栈明确: 采用现代化的 Serverless 架构，前端部署于 Vercel，后端及数据库使用 Supabase，以实现快速开发和弹性伸缩。
	◦	
	•	
1.4 目标用户
	•	学员: 已报名参加AI训战营的付费用户。
	•	管理员: 课程的组织者、讲师或助教，负责平台的内容和学员管理。


2. 用户角色与权限

平台包含两种核心角色：

角色
描述
核心权限
学员 (Student)
课程的学习者
- 查看自己有权限的课程列表<br>- 观看课程视频<br>- 下载课程资料<br>- 提交课后作业
管理员 (Admin)
平台的管理者
- 创建、编辑、删除课程<br>- 上传/关联课程资料和作业<br>- 管理学员名单（白名单）<br>- 查看所有学员的作业提交状态



3. 功能需求详述

3.1 用户认证与授权 (Authentication & Authorization)

3.1.1 登录页面
	•	页面提供统一的登录入口。
	•	登录按钮明确，例如“使用飞书登录开始学习”。
	◦	
	•	
3.1.2 学员登录流程 (SSO + 白名单)
	•	学员统一使用 飞书账号 SSO 进行登录。
	•	授权机制: 只有被管理员预先添加到“学员名单”（白名单）中的飞书用户才能成功登录并访问平台。
	•	实现细节:
	◦	用户点击“使用飞书登录”。
	◦	跳转至飞书授权页面，用户确认授权。
	◦	Supabase 接收到飞书的回调，准备创建新用户。
	◦	触发数据库函数: 该函数接收到新用户的邮箱或唯一ID，查询平台内的 authorized_users (学员白名单) 表。
	◦	判断:
	1	若在白名单内: 允许在 auth.users 表中创建用户，登录成功，跳转至学员主页。
	2	若不在白名单内: 阻止用户创建，登录流程中断，前端页面提示“抱歉，您的账号未被授权访问此系统”。
	▪	
	3	
3.1.3 管理员登录流程
	•	为简化初期开发，管理员可与学员使用相同的SSO登录入口。
	•	通过在用户表（或单独的 admins 表）中设置一个 role 字段来区分。
	•	登录后，系统根据用户的 role 判断其身份，展示对应的管理员界面或学员界面。
	•	（备选方案）管理员也可使用独立的邮箱/密码登录，这需要在 Supabase 中开启邮箱登录提供商。
	◦	
	•	
3.2 管理员后台界面

3.2.1 课程管理
	•	功能: 管理员可以对课程进行创建、查看、编辑、删除 (CRUD) 操作。
	•	课程列表: 以列表或卡片形式展示所有已创建的课程，显示课程封面、标题、创建日期等。
	•	创建/编辑课程表单:
	◦	课程标题 (文本输入框)
	◦	课程封面 (图片上传)
	◦	课程视频链接 (文本输入框，粘贴飞书云文档/视频链接)
	◦	课程资料 (文件上传，支持PDF、Markdown、ZIP等)
	◦	课后作业 (文本描述输入，或关联一个作业文件)
	▪	
	◦	
3.2.2 学员名单管理
	•	功能: 管理员可以对学员白名单进行增、删、查操作。
	•	界面: 一个简单的表格，显示所有被授权学员的 E-mail / 姓名。
	•	核心操作:
	◦	添加学员: 输入学员的邮箱地址手动添加。
	◦	批量导入: 支持通过上传CSV文件批量添加学员名单。CSV文件至少包含 email 列。
	◦	移除学员: 从名单中删除某个学员，该学员将无法再登录。
	▪	
	◦	
3.2.3 学员作业管理
	•	功能: 跟踪并查看学员的作业提交情况。
	•	界面:
	◦	管理员先选择一个课程或一个具体的作业。
	◦	系统展示该作业的学员列表。
	◦	列表中每一行显示一个学员，并明确标注其作业状态：“**已提交**”或“**未提交**”。
	◦	对于“已提交”的学员，提供链接或按钮，点击可查看其提交的内容。
	1	
	◦	
3.3 学员学习界面

3.3.1 课程列表页
	•	学员登录后看到的主页面。
	•	以卡片形式展示所有自己有权限访问的课程。
	•	每个卡片包含课程封面、标题和学习进度（可选，V1可简化）。
	◦	
	•	
3.3.2 课程详情页
	•	点击课程卡片后进入的页面。
	•	页面布局:
	◦	左侧/主要区域: 嵌入式视频播放器，播放管理员填写的飞书视频链接。
	◦	右侧/下方区域:
	▪	课程资料: 列出与本课相关的资料，提供下载按钮。
	▪	课后作业:
	▪	显示作业要求和描述。
	▪	提供一个作业提交区域，可包含：一个文本框（用于粘贴链接或简短回答）和一个文件上传按钮。
	▪	用户提交后，按钮状态变为“已提交”或“更新提交”。
	▪	
	▪	


4. 数据库表结构设计 (Supabase/PostgreSQL)

初步建议的表结构如下：

	1	profiles (用户信息表)
	1	id (UUID, 主键, 关联 auth.users.id)
	2	email (Text)
	3	full_name (Text)
	4	avatar_url (Text)
	5	role (Text, 'student' 或 'admin', 默认为 'student')
	▪	
	6	
	2	authorized_users (学员白名单)
	1	id (Serial, 主键)
	2	email (Text, Unique)
	3	name (Text, 可选)
	▪	
	4	
	3	courses (课程表)
	1	id (UUID, 主键)
	2	title (Text)
	3	description (Text, 可选)
	4	cover_url (Text, 存储封面图片链接)
	5	video_url (Text, 存储飞书视频链接)
	6	created_at (Timestamp)
	▪	
	7	
	4	course_materials (课程资料表)
	1	id (UUID, 主键)
	2	course_id (UUID, 外键关联 courses.id)
	3	file_name (Text)
	4	file_url (Text, 存储 Supabase Storage 链接)
	▪	
	5	
	5	assignments (作业表)
	1	id (UUID, 主键)
	2	course_id (UUID, 外键关联 courses.id)
	3	title (Text)
	4	description (Text)
	▪	
	5	
	6	submissions (作业提交记录表)
	1	id (UUID, 主键)
	2	assignment_id (UUID, 外键关联 assignments.id)
	3	student_id (UUID, 外键关联 profiles.id)
	4	content (Text, 存储学生提交的文本内容)
	5	file_url (Text, 存储学生提交的文件链接)
	6	submitted_at (Timestamp)
	7	UNIQUE(assignment_id, student_id) (确保一个学生对一个作业只能有一条提交记录)
	▪	
	8	


5. 非功能性需求

	•	安全性:
	◦	必须在 Supabase 中为所有表配置行级安全策略 (Row Level Security)，确保：
	▪	学员只能看到自己的信息和课程内容。
	▪	管理员有权访问和修改所有相关数据。
	•	部署:
	◦	Web应用部署在 Vercel。
	◦	Supabase 项目用于数据库、认证、存储和 Serverless Functions。
	•	性能: 页面加载速度应快，视频播放流畅（依赖飞书）。
	•	可维护性: 代码结构清晰，遵循最佳实践，方便未来迭代。
	◦	
	•	

文档结束
