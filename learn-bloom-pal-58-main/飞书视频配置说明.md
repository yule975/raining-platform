# 飞书视频配置说明

## 问题描述

当前平台在处理飞书视频链接时遇到 `net::ERR_ABORTED` 错误，这是因为飞书视频链接不能直接通过 iframe 嵌入到第三方网站中。

## 错误原因

1. **跨域限制**: 飞书出于安全考虑，不允许其视频内容在第三方网站中直接嵌入
2. **权限验证**: 飞书视频需要用户登录和权限验证才能访问
3. **链接格式**: `https://docs.feishu.cn/docx/video123` 这样的链接是文档链接，不是可嵌入的视频链接

## 解决方案

### 方案一：使用公开的视频平台

推荐将视频上传到支持嵌入的平台：

1. **YouTube**
   - 上传视频到 YouTube
   - 获取嵌入链接：`https://www.youtube.com/embed/VIDEO_ID`
   - 支持完整的播放器功能

2. **Bilibili**
   - 上传到 B站
   - 获取嵌入代码中的链接
   - 格式：`https://player.bilibili.com/player.html?bvid=BV_ID`

3. **腾讯视频**
   - 上传到腾讯视频
   - 获取嵌入链接

### 方案二：使用企业级视频解决方案

1. **阿里云视频点播**
   - 上传视频到阿里云 VOD
   - 获取播放地址
   - 支持防盗链、加密等企业功能

2. **腾讯云点播**
   - 类似阿里云的解决方案
   - 提供完整的视频管理功能

### 方案三：飞书开放平台集成

如果必须使用飞书视频，需要：

1. **申请飞书开放平台权限**
   - 注册飞书开放平台应用
   - 申请视频相关 API 权限
   - 获取 App ID 和 App Secret

2. **实现服务端代理**
   - 在后端实现飞书 API 调用
   - 获取视频流地址
   - 代理视频内容到前端

3. **配置 CORS 和权限**
   - 配置飞书应用的域名白名单
   - 处理用户身份验证

## 当前实现

我们已经创建了 `FeishuVideoPlayer` 组件来处理这个问题：

```typescript
// 检测飞书链接并显示友好提示
if (isFeishuLink && videoUrl.includes('video123')) {
  return (
    <div className="error-message">
      <p>飞书视频暂时无法播放</p>
      <p>请联系管理员配置正确的视频链接</p>
    </div>
  );
}
```

## 推荐配置步骤

1. **立即解决方案**：
   - 将课程视频上传到 YouTube 或 Bilibili
   - 在课程管理界面更新视频链接
   - 使用格式：`https://www.youtube.com/embed/VIDEO_ID`

2. **长期解决方案**：
   - 评估企业视频需求
   - 选择合适的企业级视频平台
   - 实现统一的视频管理系统

## 测试链接示例

```javascript
// YouTube 嵌入链接
videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ'

// Bilibili 嵌入链接  
videoUrl: 'https://player.bilibili.com/player.html?bvid=BV1xx411c7mD'

// 错误的飞书链接（会显示错误提示）
videoUrl: 'https://docs.feishu.cn/docx/video123'
```

## 注意事项

1. 确保视频链接是可嵌入的格式
2. 测试视频在不同浏览器中的兼容性
3. 考虑视频加载速度和用户体验
4. 如果使用企业内部视频，确保网络访问权限正确配置