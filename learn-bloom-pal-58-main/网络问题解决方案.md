# 网络连接问题解决方案

## 问题诊断

根据网络测试结果，您的网络连接基本正常，但可能存在以下问题：

### 1. 网络延迟问题
- **现象**: 连接耗时较长（>2秒）
- **原因**: 中国大陆访问海外服务器延迟较高
- **影响**: 登录可能超时或失败

### 2. 间歇性连接问题
- **现象**: 有时能连接，有时不能
- **原因**: 网络波动或防火墙策略
- **影响**: 登录不稳定

## 解决方案

### 方案一：网络优化（推荐）

#### 1. 使用VPN
```bash
# 推荐的VPN服务（仅供参考）
- ExpressVPN
- NordVPN
- Surfshark
- 或其他稳定的VPN服务
```

#### 2. 更换DNS服务器
```bash
# 在系统网络设置中更改DNS为：
主DNS: 8.8.8.8
备DNS: 1.1.1.1

# 或者使用：
主DNS: 114.114.114.114
备DNS: 223.5.5.5
```

#### 3. 使用移动网络
- 尝试使用手机热点
- 某些移动网络对海外服务访问更稳定

### 方案二：应用层优化

#### 1. 增加重试机制
已在代码中添加了15秒超时和详细错误处理，如果仍有问题可以：

```javascript
// 在登录时添加重试逻辑
const maxRetries = 3;
for (let i = 0; i < maxRetries; i++) {
  try {
    const result = await auth.signIn(email, password);
    if (result.user) break;
  } catch (error) {
    if (i === maxRetries - 1) throw error;
    await new Promise(resolve => setTimeout(resolve, 2000)); // 等待2秒重试
  }
}
```

#### 2. 本地缓存优化
```javascript
// 缓存用户信息减少网络请求
localStorage.setItem('user_cache', JSON.stringify(userInfo));
```

### 方案三：替代方案

#### 1. 使用国内云服务
如果网络问题持续存在，建议考虑：
- 腾讯云数据库
- 阿里云数据库
- 华为云数据库

#### 2. 本地开发环境
```bash
# 安装本地PostgreSQL
brew install postgresql

# 启动服务
brew services start postgresql

# 创建数据库
createdb training_platform
```

## 测试步骤

### 1. 运行网络诊断
```bash
node network-test.cjs
```

### 2. 检查浏览器控制台
1. 打开浏览器开发者工具 (F12)
2. 切换到 Console 标签
3. 尝试登录并查看详细日志
4. 查找以下关键信息：
   - 网络环境检测结果
   - 登录请求耗时
   - 具体错误信息

### 3. 测试不同网络环境
- WiFi网络
- 移动网络
- 公司网络
- 家庭网络

## 常见错误及解决方法

### 错误1: "登录请求超时"
**解决方法**:
1. 检查网络连接
2. 使用VPN
3. 尝试移动网络

### 错误2: "Invalid login credentials"
**解决方法**:
1. 确认邮箱和密码正确
2. 检查账号是否已创建
3. 联系管理员重置密码

### 错误3: "网络连接较慢"
**解决方法**:
1. 使用VPN加速
2. 更换网络环境
3. 等待网络状况改善

## 测试账号

为了方便测试，提供以下测试账号：

### 学员账号
- 邮箱: student@test.com
- 密码: student123456

### 管理员账号
- 邮箱: admin@test.com
- 密码: admin123456

## 联系技术支持

如果以上方案都无法解决问题，请提供以下信息联系技术支持：

1. 网络诊断结果截图
2. 浏览器控制台错误日志
3. 网络环境描述（地区、运营商、网络类型）
4. 尝试过的解决方案

## 监控和日志

系统已添加详细的网络监控日志，包括：
- 登录请求耗时
- 网络环境检测
- 详细错误信息
- 超时处理

这些日志将帮助快速定位和解决网络问题。